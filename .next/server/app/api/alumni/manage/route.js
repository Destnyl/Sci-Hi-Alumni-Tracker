"use strict";(()=>{var e={};e.id=32,e.ids=[32],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4770:e=>{e.exports=require("crypto")},665:e=>{e.exports=require("dns")},7702:e=>{e.exports=require("events")},2048:e=>{e.exports=require("fs")},2615:e=>{e.exports=require("http")},2694:e=>{e.exports=require("http2")},8216:e=>{e.exports=require("net")},9801:e=>{e.exports=require("os")},5315:e=>{e.exports=require("path")},5816:e=>{e.exports=require("process")},6162:e=>{e.exports=require("stream")},2452:e=>{e.exports=require("tls")},7360:e=>{e.exports=require("url")},1764:e=>{e.exports=require("util")},1568:e=>{e.exports=require("zlib")},8176:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>A,patchFetch:()=>v,requestAsyncStorage:()=>h,routeModule:()=>g,serverHooks:()=>f,staticGenerationAsyncStorage:()=>x});var a={};t.r(a),t.d(a,{DELETE:()=>m,GET:()=>d,POST:()=>p,PUT:()=>c});var s=t(9303),i=t(8716),n=t(670),o=t(7070),u=t(8629),l=t(9419);async function d(){try{console.log("\uD83D\uDD0D Alumni Management API: Fetching all approved alumni...");let e=(0,u.hJ)(l.db,"alumni"),r=(0,u.IO)(e,(0,u.Xo)("createdAt","desc")),t=await (0,u.PL)(r),a=[];return t.forEach(e=>{let r=e.data();"approved"===r.status&&a.push({id:e.id,...r})}),console.log(`✅ Alumni Management API: Found ${a.length} approved alumni`),o.NextResponse.json(a)}catch(e){return console.error("❌ Alumni Management API Error:",e),o.NextResponse.json({error:"Failed to fetch alumni",details:e.message},{status:500})}}async function p(e){try{let{name:r,strand:t,collegeCourse:a,currentOccupation:s,credentialsInField:i,email:n}=await e.json();if(!r||!t||!a||!s)return o.NextResponse.json({error:"Name, strand, college course, and current occupation are required"},{status:400});let d=(0,u.hJ)(l.db,"alumni"),p={name:r,strand:t,collegeCourse:a,currentOccupation:s,credentialsInField:i||"",email:n||"",emailVerified:!!n,needsEmailUpdate:!n,status:"approved",createdAt:(0,u.Bt)(),updatedAt:(0,u.Bt)(),reviewedAt:(0,u.Bt)(),reviewedBy:"School Registrar (Direct Add)"},c=await (0,u.ET)(d,p);return o.NextResponse.json({message:"Alumni added successfully!",alumni:{id:c.id,...p}},{status:201})}catch(e){return console.error("❌ Add Alumni Error:",e),o.NextResponse.json({error:"Failed to add alumni",details:e.message},{status:500})}}async function c(e){try{let{alumniId:r,name:t,strand:a,collegeCourse:s,currentOccupation:i,credentialsInField:n,email:d}=await e.json();if(!r||!t||!a||!s||!i)return o.NextResponse.json({error:"Alumni ID and all required fields must be provided"},{status:400});let p=(0,u.JU)(l.db,"alumni",r),c={name:t,strand:a,collegeCourse:s,currentOccupation:i,credentialsInField:n||"",updatedAt:(0,u.Bt)()};return void 0!==d&&(c.email=d,c.emailVerified=!!d,c.needsEmailUpdate=!d),await (0,u.r7)(p,c),o.NextResponse.json({message:"Alumni information updated successfully!"})}catch(e){return console.error("❌ Update Alumni Error:",e),o.NextResponse.json({error:"Failed to update alumni",details:e.message},{status:500})}}async function m(e){try{let{searchParams:r}=new URL(e.url),t=r.get("alumniId");if(!t)return o.NextResponse.json({error:"Alumni ID is required"},{status:400});let a=(0,u.JU)(l.db,"alumni",t);return await (0,u.oe)(a),o.NextResponse.json({message:"Alumni removed successfully!"})}catch(e){return console.error("❌ Delete Alumni Error:",e),o.NextResponse.json({error:"Failed to delete alumni",details:e.message},{status:500})}}let g=new s.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/alumni/manage/route",pathname:"/api/alumni/manage",filename:"route",bundlePath:"app/api/alumni/manage/route"},resolvedPagePath:"C:\\Users\\adestajo\\Desktop\\REPO\\New folder\\Alumni Tracking Website\\src\\app\\api\\alumni\\manage\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:h,staticGenerationAsyncStorage:x,serverHooks:f}=g,A="/api/alumni/manage/route";function v(){return(0,n.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:x})}},9419:(e,r,t)=>{let a;t.d(r,{db:()=>o});var s=t(9362),i=t(8629);let n={apiKey:"AIzaSyAm0MdHaVr6cVA147cwMQiCL7wvpB1c1Ho",authDomain:"scihi-alumni-tracking.firebaseapp.com",projectId:"scihi-alumni-tracking",storageBucket:"scihi-alumni-tracking.firebasestorage.app",messagingSenderId:"776095020338",appId:"1:776095020338:web:77e44b70e46d77203e932b"};try{(function(){let e=["apiKey","authDomain","projectId","appId"].filter(e=>!n[e]);if(e.length>0)throw console.error("❌ Firebase configuration is incomplete. Missing:",e),console.error("Make sure you have a .env.local file with all NEXT_PUBLIC_FIREBASE_* variables"),Error(`Firebase configuration missing: ${e.join(", ")}`)})(),a=0===(0,s.C6)().length?(0,s.ZF)(n):(0,s.Mq)(),console.log("✅ Firebase initialized successfully for project:",n.projectId)}catch(e){throw console.error("❌ Firebase initialization failed:",e),e}let o=(0,i.ad)(a)}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[276,532],()=>t(8176));module.exports=a})();