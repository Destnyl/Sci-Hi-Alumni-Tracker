"use strict";(()=>{var e={};e.id=281,e.ids=[281],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4770:e=>{e.exports=require("crypto")},665:e=>{e.exports=require("dns")},7702:e=>{e.exports=require("events")},2048:e=>{e.exports=require("fs")},2615:e=>{e.exports=require("http")},2694:e=>{e.exports=require("http2")},8216:e=>{e.exports=require("net")},9801:e=>{e.exports=require("os")},5315:e=>{e.exports=require("path")},5816:e=>{e.exports=require("process")},6162:e=>{e.exports=require("stream")},2452:e=>{e.exports=require("tls")},7360:e=>{e.exports=require("url")},1764:e=>{e.exports=require("util")},1568:e=>{e.exports=require("zlib")},7259:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>x,patchFetch:()=>v,requestAsyncStorage:()=>g,routeModule:()=>c,serverHooks:()=>h,staticGenerationAsyncStorage:()=>m});var i={};t.r(i),t.d(i,{GET:()=>l,POST:()=>d});var o=t(9303),s=t(8716),n=t(670),a=t(7070),p=t(8629),u=t(9419);async function l(){try{console.log("\uD83D\uDD0D Pending Alumni API: Fetching pending registrations...");let e=(0,p.hJ)(u.db,"alumni"),r=(0,p.IO)(e,(0,p.ar)("status","==","pending")),t=await (0,p.PL)(r),i=[];return t.forEach(e=>{let r=e.data();i.push({id:e.id,...r})}),i.sort((e,r)=>e.createdAt&&r.createdAt?r.createdAt.seconds-e.createdAt.seconds:0),console.log(`✅ Pending Alumni API: Found ${i.length} pending registrations`),a.NextResponse.json(i)}catch(e){return console.error("❌ Pending Alumni API Error:",e),a.NextResponse.json({error:"Failed to fetch pending registrations",details:e.message},{status:500})}}async function d(e){try{let{alumniId:r,action:t,reviewedBy:i}=await e.json();if(!r||!t||!["approve","reject"].includes(t))return a.NextResponse.json({error:"Invalid request. Alumni ID and valid action (approve/reject) required."},{status:400});let o=(0,p.JU)(u.db,"alumni",r);if("approve"===t)return await (0,p.r7)(o,{status:"approved",reviewedAt:(0,p.Bt)(),reviewedBy:i||"School Registrar",updatedAt:(0,p.Bt)()}),a.NextResponse.json({message:"Alumni registration approved successfully!",action:"approved"});return await (0,p.oe)(o),a.NextResponse.json({message:"Alumni registration rejected and removed.",action:"rejected"})}catch(e){return console.error("❌ Alumni Approval/Rejection Error:",e),a.NextResponse.json({error:"Failed to process registration",details:e.message},{status:500})}}let c=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/alumni/pending/route",pathname:"/api/alumni/pending",filename:"route",bundlePath:"app/api/alumni/pending/route"},resolvedPagePath:"C:\\Users\\adestajo\\Desktop\\REPO\\New folder\\Alumni Tracking Website\\src\\app\\api\\alumni\\pending\\route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:g,staticGenerationAsyncStorage:m,serverHooks:h}=c,x="/api/alumni/pending/route";function v(){return(0,n.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:m})}},9419:(e,r,t)=>{let i;t.d(r,{db:()=>a});var o=t(9362),s=t(8629);let n={apiKey:"AIzaSyAm0MdHaVr6cVA147cwMQiCL7wvpB1c1Ho",authDomain:"scihi-alumni-tracking.firebaseapp.com",projectId:"scihi-alumni-tracking",storageBucket:"scihi-alumni-tracking.firebasestorage.app",messagingSenderId:"776095020338",appId:"1:776095020338:web:77e44b70e46d77203e932b"};try{(function(){let e=["apiKey","authDomain","projectId","appId"].filter(e=>!n[e]);if(e.length>0)throw console.error("❌ Firebase configuration is incomplete. Missing:",e),console.error("Make sure you have a .env.local file with all NEXT_PUBLIC_FIREBASE_* variables"),Error(`Firebase configuration missing: ${e.join(", ")}`)})(),i=0===(0,o.C6)().length?(0,o.ZF)(n):(0,o.Mq)(),console.log("✅ Firebase initialized successfully for project:",n.projectId)}catch(e){throw console.error("❌ Firebase initialization failed:",e),e}let a=(0,s.ad)(i)}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),i=r.X(0,[276,532],()=>t(7259));module.exports=i})();