(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[707],{7007:function(e,t,n){Promise.resolve().then(n.bind(n,4874))},9376:function(e,t,n){"use strict";var s=n(5475);n.o(s,"useRouter")&&n.d(t,{useRouter:function(){return s.useRouter}})},4369:function(e,t,n){"use strict";var s=n(2265),r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=s.useState,l=s.useEffect,i=s.useLayoutEffect,o=s.useDebugValue;function d(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!r(e,n)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),s=a({inst:{value:n,getSnapshot:t}}),r=s[0].inst,c=s[1];return i(function(){r.value=n,r.getSnapshot=t,d(r)&&c({inst:r})},[e,n,t]),l(function(){return d(r)&&c({inst:r}),e(function(){d(r)&&c({inst:r})})},[e]),o(n),n};t.useSyncExternalStore=void 0!==s.useSyncExternalStore?s.useSyncExternalStore:c},2860:function(e,t,n){"use strict";var s=n(2265),r=n(2558),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},l=r.useSyncExternalStore,i=s.useRef,o=s.useEffect,d=s.useMemo,c=s.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,s,r){var u=i(null);if(null===u.current){var m={hasValue:!1,value:null};u.current=m}else m=u.current;var x=l(e,(u=d(function(){function e(e){if(!o){if(o=!0,l=e,e=s(e),void 0!==r&&m.hasValue){var t=m.value;if(r(t,e))return i=t}return i=e}if(t=i,a(l,e))return t;var n=s(e);return void 0!==r&&r(t,n)?(l=e,t):(l=e,i=n)}var l,i,o=!1,d=void 0===n?null:n;return[function(){return e(t())},null===d?void 0:function(){return e(d())}]},[t,n,s,r]))[0],u[1]);return o(function(){m.hasValue=!0,m.value=x},[x]),c(x),x}},2558:function(e,t,n){"use strict";e.exports=n(4369)},5195:function(e,t,n){"use strict";e.exports=n(2860)},4874:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var s=n(7437),r=n(9376),a=n(2265),l=n(1158);function i(){let e=(0,r.useRouter)(),t=(0,l.q)(e=>e.isAuthenticated),[n,i]=(0,a.useState)("pending"),[o,d]=(0,a.useState)([]),[c,u]=(0,a.useState)(!0),[m,x]=(0,a.useState)([]),[h,p]=(0,a.useState)(!1),[g,f]=(0,a.useState)(null),[b,j]=(0,a.useState)(null),[y,v]=(0,a.useState)({name:"",strand:"",collegeCourse:"",currentOccupation:"",credentialsInField:"",email:""}),[B,N]=(0,a.useState)(!1),[E,D]=(0,a.useState)(null),[w,A]=(0,a.useState)({alumniId:"",studentName:"",studentEmail:"",studentContact:"",researchTitle:"",researchDescription:"",consultationNeeds:"",expectedDuration:"",senderName:"School Registrar"}),[C,S]=(0,a.useState)([]),[F,k]=(0,a.useState)(!1);async function O(){try{u(!0);let e=await fetch("/api/alumni/pending");if(e.ok){let t=await e.json();d(t)}else j({type:"error",text:"Failed to load pending registrations"})}catch(e){j({type:"error",text:"Error loading pending data"})}finally{u(!1)}}async function R(){try{p(!0);let e=await fetch("/api/alumni/manage");if(e.ok){let t=await e.json();x(t)}else j({type:"error",text:"Failed to load alumni data"})}catch(e){j({type:"error",text:"Error loading alumni data"})}finally{p(!1)}}async function q(){try{k(!0);let e=await fetch("/api/alumni/consultation");if(e.ok){let t=await e.json();S(t)}else j({type:"error",text:"Failed to load consultation history"})}catch(e){j({type:"error",text:"Error loading consultation history"})}finally{k(!1)}}async function T(e,t,n){f(e),j(null);try{let s=await fetch("/api/alumni/pending",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({alumniId:e,action:t,reviewedBy:"School Registrar"})});if(s.ok)j({type:"success",text:"".concat(n,"'s registration has been ").concat(t,"d successfully!")}),d(t=>t.filter(t=>t.id!==e));else{let e=await s.json();j({type:"error",text:e.error||"Failed to ".concat(t," registration")})}}catch(e){j({type:"error",text:"Error ".concat(t,"ing registration")})}finally{f(null)}}async function I(e){if(e.preventDefault(),!y.name||!y.strand||!y.collegeCourse||!y.currentOccupation){j({type:"error",text:"Please fill in all required fields"});return}N(!0),j(null);try{let e=await fetch("/api/alumni/manage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)});if(e.ok)j({type:"success",text:"Alumni added successfully!"}),v({name:"",strand:"",collegeCourse:"",currentOccupation:"",credentialsInField:"",email:""}),"manage"===n&&R();else{let t=await e.json();j({type:"error",text:t.error||"Failed to add alumni"})}}catch(e){j({type:"error",text:"Error adding alumni"})}finally{N(!1)}}async function P(e){if(e.preventDefault(),!E||!y.name||!y.strand||!y.collegeCourse||!y.currentOccupation){j({type:"error",text:"Please fill in all required fields"});return}N(!0),j(null);try{let e=await fetch("/api/alumni/manage",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({alumniId:E.id,...y})});if(e.ok)j({type:"success",text:"Alumni information updated successfully!"}),D(null),v({name:"",strand:"",collegeCourse:"",currentOccupation:"",credentialsInField:"",email:""}),R(),i("manage");else{let t=await e.json();j({type:"error",text:t.error||"Failed to update alumni"})}}catch(e){j({type:"error",text:"Error updating alumni"})}finally{N(!1)}}async function L(e,t){if(confirm("Are you sure you want to delete ".concat(t," from the alumni list? This action cannot be undone."))){f(e),j(null);try{let n=await fetch("/api/alumni/manage?alumniId=".concat(e),{method:"DELETE"});if(n.ok)j({type:"success",text:"".concat(t," has been removed from the alumni list.")}),R();else{let e=await n.json();j({type:"error",text:e.error||"Failed to delete alumni"})}}catch(e){j({type:"error",text:"Error deleting alumni"})}finally{f(null)}}}function M(){D(null),v({name:"",strand:"",collegeCourse:"",currentOccupation:"",credentialsInField:"",email:""})}async function U(e){if(e.preventDefault(),!w.alumniId||!w.studentName||!w.studentEmail||!w.researchTitle||!w.consultationNeeds){j({type:"error",text:"Please fill in all required fields"});return}N(!0),j(null);try{let e=await fetch("/api/alumni/consultation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)});if(e.ok){let t=await e.json();j({type:"success",text:t.message}),A({alumniId:"",studentName:"",studentEmail:"",studentContact:"",researchTitle:"",researchDescription:"",consultationNeeds:"",expectedDuration:"",senderName:"School Registrar"}),q()}else{let t=await e.json();j({type:"error",text:t.error||"Failed to send consultation request"})}}catch(e){j({type:"error",text:"Error sending consultation request"})}finally{N(!1)}}(0,a.useEffect)(()=>{t?O():e.replace("/login?redirect=/registrar")},[t,e]),(0,a.useEffect)(()=>{"manage"===n&&t&&R()},[n,t]),(0,a.useEffect)(()=>{"consultation"===n&&t&&q()},[n,t]);let V=e=>{let{name:t,value:n}=e.target;v(e=>({...e,[t]:n}))},_=e=>{let{name:t,value:n}=e.target;A(e=>({...e,[t]:n}))};return t?(0,s.jsxs)("div",{className:"flex min-h-screen flex-col bg-checkered",children:[(0,s.jsxs)("header",{className:"relative overflow-hidden rounded-t-xl bg-gradient-to-b from-[#B23B3B] to-[#8B2E2E] py-8 text-center text-white shadow-lg",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.12'/%3E%3C/svg%3E\")"},children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black/10"}),(0,s.jsx)("h1",{className:"relative z-10 text-xl font-bold text-shadow-lg",children:"School Registrar Dashboard"}),(0,s.jsx)("p",{className:"relative z-10 mt-2 text-sm text-white/90",children:"Manage alumni registrations and data"})]}),(0,s.jsx)("div",{className:"bg-white border-b-2 border-[#A03E2D]/20 px-6",children:(0,s.jsx)("div",{className:"mx-auto max-w-6xl",children:(0,s.jsxs)("div",{className:"flex space-x-8",children:[(0,s.jsxs)("button",{onClick:()=>i("pending"),className:"py-4 px-2 border-b-2 font-medium text-sm transition-colors duration-200 ".concat("pending"===n?"border-[#B23B3B] text-[#B23B3B]":"border-transparent text-[#A03E2D]/60 hover:text-[#A03E2D]"),children:["Pending Approvals (",o.length,")"]}),(0,s.jsx)("button",{onClick:()=>i("manage"),className:"py-4 px-2 border-b-2 font-medium text-sm transition-colors duration-200 ".concat("manage"===n?"border-[#B23B3B] text-[#B23B3B]":"border-transparent text-[#A03E2D]/60 hover:text-[#A03E2D]"),children:"Manage Alumni"}),(0,s.jsx)("button",{onClick:()=>{i("add"),E&&M()},className:"py-4 px-2 border-b-2 font-medium text-sm transition-colors duration-200 ".concat("add"===n?"border-[#B23B3B] text-[#B23B3B]":"border-transparent text-[#A03E2D]/60 hover:text-[#A03E2D]"),children:E?"Edit Alumni":"Add Alumni"}),(0,s.jsx)("button",{onClick:()=>i("consultation"),className:"py-4 px-2 border-b-2 font-medium text-sm transition-colors duration-200 ".concat("consultation"===n?"border-[#B23B3B] text-[#B23B3B]":"border-transparent text-[#A03E2D]/60 hover:text-[#A03E2D]"),children:"Research Consultation"})]})})}),(0,s.jsxs)("main",{className:"flex flex-1 flex-col px-6 py-8",children:[b&&(0,s.jsxs)("div",{className:"mb-6 mx-auto max-w-6xl rounded-lg p-4 text-center ".concat("success"===b.type?"bg-green-100 text-green-800 border border-green-300":"bg-red-100 text-red-800 border border-red-300"),children:[b.text,(0,s.jsx)("button",{onClick:()=>j(null),className:"ml-4 text-sm underline hover:no-underline",children:"Dismiss"})]}),(0,s.jsxs)("div",{className:"mx-auto w-full max-w-6xl",children:["pending"===n&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold text-[#B23B3B]",children:["Pending Alumni Registrations (",o.length,")"]}),(0,s.jsx)("button",{onClick:O,disabled:c,className:"rounded-lg bg-[#FF7F27] px-4 py-2 text-white font-medium hover:bg-[#E85D04] disabled:opacity-50 transition-colors duration-200",children:c?"Loading...":"Refresh"})]}),c?(0,s.jsx)("div",{className:"text-center py-12",children:(0,s.jsx)("p",{className:"text-[#A03E2D]",children:"Loading pending registrations..."})}):0===o.length?(0,s.jsxs)("div",{className:"rounded-2xl border-2 border-[#A03E2D] bg-[#FDF4DD] p-12 text-center",children:[(0,s.jsx)("p",{className:"text-lg font-medium text-[#A03E2D]",children:"\uD83C\uDF89 No pending registrations to review!"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-[#A03E2D]/80",children:"All alumni registrations have been processed."})]}):(0,s.jsx)("div",{className:"space-y-4",children:o.map(e=>(0,s.jsxs)("div",{className:"rounded-xl border-2 border-[#A03E2D] bg-white p-6 shadow-lg hover:shadow-xl transition-shadow duration-200",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-[#B23B3B] mb-2",children:e.name}),(0,s.jsxs)("p",{className:"text-sm text-[#A03E2D]",children:[(0,s.jsx)("strong",{children:"Strand:"})," ",e.strand]}),(0,s.jsxs)("p",{className:"text-sm text-[#A03E2D]",children:[(0,s.jsx)("strong",{children:"Course:"})," ",e.collegeCourse]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-sm text-[#A03E2D]",children:[(0,s.jsx)("strong",{children:"Occupation:"})," ",e.currentOccupation]}),e.credentialsInField&&(0,s.jsxs)("p",{className:"text-sm text-[#A03E2D]",children:[(0,s.jsx)("strong",{children:"Credentials:"})," ",e.credentialsInField]}),e.email&&(0,s.jsxs)("p",{className:"text-sm text-[#A03E2D]",children:[(0,s.jsx)("strong",{children:"Email:"})," ",e.email,e.needsEmailUpdate&&(0,s.jsx)("span",{className:"text-xs text-orange-600 ml-2",children:"(needs update)"})]}),(0,s.jsxs)("p",{className:"text-xs text-[#A03E2D]/70 mt-2",children:[(0,s.jsx)("strong",{children:"Submitted:"})," ",e.createdAt?new Date(1e3*e.createdAt.seconds).toLocaleDateString():"Recently"]})]})]}),(0,s.jsxs)("div",{className:"flex gap-3 pt-4 border-t border-[#A03E2D]/20",children:[(0,s.jsx)("button",{onClick:()=>T(e.id,"approve",e.name),disabled:g===e.id,className:"flex-1 rounded-lg bg-green-600 px-4 py-2 text-white font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:g===e.id?"Processing...":"✅ Approve"}),(0,s.jsx)("button",{onClick:()=>T(e.id,"reject",e.name),disabled:g===e.id,className:"flex-1 rounded-lg bg-red-600 px-4 py-2 text-white font-medium hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:g===e.id?"Processing...":"❌ Reject"})]})]},e.id))})]}),"manage"===n&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold text-[#B23B3B]",children:["Alumni Management (",m.length," approved)"]}),(0,s.jsx)("button",{onClick:R,disabled:h,className:"rounded-lg bg-[#FF7F27] px-4 py-2 text-white font-medium hover:bg-[#E85D04] disabled:opacity-50 transition-colors duration-200",children:h?"Loading...":"Refresh"})]}),h?(0,s.jsx)("div",{className:"text-center py-12",children:(0,s.jsx)("p",{className:"text-[#A03E2D]",children:"Loading alumni data..."})}):0===m.length?(0,s.jsxs)("div",{className:"rounded-2xl border-2 border-[#A03E2D] bg-[#FDF4DD] p-12 text-center",children:[(0,s.jsx)("p",{className:"text-lg font-medium text-[#A03E2D]",children:"No approved alumni records found."}),(0,s.jsx)("p",{className:"mt-2 text-sm text-[#A03E2D]/80",children:"Approve pending registrations or add alumni directly."})]}):(0,s.jsx)("div",{className:"space-y-4",children:m.map(e=>(0,s.jsxs)("div",{className:"rounded-xl border-2 border-[#A03E2D] bg-white p-6 shadow-lg hover:shadow-xl transition-shadow duration-200",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-[#B23B3B] mb-2",children:e.name}),(0,s.jsxs)("p",{className:"text-sm text-[#A03E2D]",children:[(0,s.jsx)("strong",{children:"Strand:"})," ",e.strand]}),(0,s.jsxs)("p",{className:"text-sm text-[#A03E2D]",children:[(0,s.jsx)("strong",{children:"Course:"})," ",e.collegeCourse]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-sm text-[#A03E2D]",children:[(0,s.jsx)("strong",{children:"Occupation:"})," ",e.currentOccupation]}),e.credentialsInField&&(0,s.jsxs)("p",{className:"text-sm text-[#A03E2D]",children:[(0,s.jsx)("strong",{children:"Credentials:"})," ",e.credentialsInField]}),e.email&&(0,s.jsxs)("p",{className:"text-sm text-[#A03E2D]",children:[(0,s.jsx)("strong",{children:"Email:"})," ",e.email,e.needsEmailUpdate&&(0,s.jsx)("span",{className:"text-xs text-orange-600 ml-2",children:"(needs update)"})]}),(0,s.jsxs)("p",{className:"text-xs text-[#A03E2D]/70 mt-2",children:[(0,s.jsx)("strong",{children:"Added:"})," ",e.createdAt?new Date(1e3*e.createdAt.seconds).toLocaleDateString():"Recently"]})]})]}),(0,s.jsxs)("div",{className:"flex gap-3 pt-4 border-t border-[#A03E2D]/20",children:[(0,s.jsx)("button",{onClick:()=>{D(e),v({name:e.name,strand:e.strand,collegeCourse:e.collegeCourse,currentOccupation:e.currentOccupation,credentialsInField:e.credentialsInField||"",email:e.email||""}),i("add")},className:"flex-1 rounded-lg bg-blue-600 px-4 py-2 text-white font-medium hover:bg-blue-700 transition-colors duration-200",children:"✏️ Edit"}),(0,s.jsx)("button",{onClick:()=>L(e.id,e.name),disabled:g===e.id,className:"flex-1 rounded-lg bg-red-600 px-4 py-2 text-white font-medium hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:g===e.id?"Deleting...":"\uD83D\uDDD1️ Delete"})]})]},e.id))})]}),"add"===n&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-[#B23B3B]",children:E?"Edit Alumni: ".concat(E.name):"Add New Alumni"}),E&&(0,s.jsx)("button",{onClick:M,className:"rounded-lg bg-gray-500 px-4 py-2 text-white font-medium hover:bg-gray-600 transition-colors duration-200",children:"Cancel Edit"})]}),(0,s.jsx)("div",{className:"rounded-xl border-2 border-[#A03E2D] bg-white p-8 shadow-lg",children:(0,s.jsxs)("form",{onSubmit:E?P:I,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-[#A03E2D] mb-2",children:"Full Name *"}),(0,s.jsx)("input",{type:"text",id:"name",name:"name",value:y.name,onChange:V,required:!0,className:"w-full px-3 py-2 border border-[#A03E2D]/30 rounded-lg focus:outline-none focus:border-[#B23B3B] focus:ring-1 focus:ring-[#B23B3B]",placeholder:"Enter full name"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"strand",className:"block text-sm font-medium text-[#A03E2D] mb-2",children:"Strand *"}),(0,s.jsxs)("select",{id:"strand",name:"strand",value:y.strand,onChange:V,required:!0,className:"w-full px-3 py-2 border border-[#A03E2D]/30 rounded-lg focus:outline-none focus:border-[#B23B3B] focus:ring-1 focus:ring-[#B23B3B]",children:[(0,s.jsx)("option",{value:"",children:"Select strand"}),(0,s.jsx)("option",{value:"ABM",children:"ABM"}),(0,s.jsx)("option",{value:"STEM",children:"STEM"}),(0,s.jsx)("option",{value:"HUMSS",children:"HUMSS"}),(0,s.jsx)("option",{value:"GAS",children:"GAS"}),(0,s.jsx)("option",{value:"TVL",children:"TVL"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"collegeCourse",className:"block text-sm font-medium text-[#A03E2D] mb-2",children:"College Course *"}),(0,s.jsx)("input",{type:"text",id:"collegeCourse",name:"collegeCourse",value:y.collegeCourse,onChange:V,required:!0,className:"w-full px-3 py-2 border border-[#A03E2D]/30 rounded-lg focus:outline-none focus:border-[#B23B3B] focus:ring-1 focus:ring-[#B23B3B]",placeholder:"e.g., BS Computer Science"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"currentOccupation",className:"block text-sm font-medium text-[#A03E2D] mb-2",children:"Current Occupation *"}),(0,s.jsx)("input",{type:"text",id:"currentOccupation",name:"currentOccupation",value:y.currentOccupation,onChange:V,required:!0,className:"w-full px-3 py-2 border border-[#A03E2D]/30 rounded-lg focus:outline-none focus:border-[#B23B3B] focus:ring-1 focus:ring-[#B23B3B]",placeholder:"e.g., Software Developer"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"email",className:"block text-sm font-medium text-[#A03E2D] mb-2",children:["Email Address *",(0,s.jsx)("span",{className:"text-xs text-[#FF7F27] ml-1",children:"(Required for consultation requests)"})]}),(0,s.jsx)("input",{type:"email",id:"email",name:"email",value:y.email,onChange:V,required:!0,className:"w-full px-3 py-2 border border-[#A03E2D]/30 rounded-lg focus:outline-none focus:border-[#B23B3B] focus:ring-1 focus:ring-[#B23B3B]",placeholder:"alumni@email.com"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"credentialsInField",className:"block text-sm font-medium text-[#A03E2D] mb-2",children:"Credentials in Field (Optional)"}),(0,s.jsx)("textarea",{id:"credentialsInField",name:"credentialsInField",value:y.credentialsInField,onChange:V,rows:3,className:"w-full px-3 py-2 border border-[#A03E2D]/30 rounded-lg focus:outline-none focus:border-[#B23B3B] focus:ring-1 focus:ring-[#B23B3B]",placeholder:"Any certifications, licenses, or special credentials..."})]}),(0,s.jsxs)("div",{className:"flex gap-4 pt-6",children:[(0,s.jsx)("button",{type:"submit",disabled:B,className:"flex-1 rounded-lg bg-[#B23B3B] px-6 py-3 text-white font-medium hover:bg-[#8B2E2E] disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:B?E?"Updating...":"Adding...":E?"Update Alumni":"Add Alumni"}),E&&(0,s.jsx)("button",{type:"button",onClick:()=>{M(),i("manage")},className:"px-6 py-3 rounded-lg border border-[#A03E2D] text-[#A03E2D] font-medium hover:bg-[#A03E2D]/5 transition-colors duration-200",children:"Cancel & Return"})]})]})})]}),"consultation"===n&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-[#B23B3B] mb-4",children:"Research Consultation Requests"}),(0,s.jsx)("p",{className:"text-[#A03E2D]/80 text-sm",children:"Send consultation requests to alumni for student research projects. Alumni will receive detailed emails with student contact information and research requirements."})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{className:"rounded-xl border-2 border-[#A03E2D] bg-white p-6 shadow-lg",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-[#B23B3B] mb-4",children:"Send Consultation Request"}),(0,s.jsxs)("form",{onSubmit:U,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"consultation-alumni",className:"block text-sm font-medium text-[#A03E2D] mb-2",children:"Select Alumni *"}),(0,s.jsxs)("select",{id:"consultation-alumni",name:"alumniId",value:w.alumniId,onChange:_,required:!0,className:"w-full px-3 py-2 border border-[#A03E2D]/30 rounded-lg focus:outline-none focus:border-[#B23B3B] focus:ring-1 focus:ring-[#B23B3B]",children:[(0,s.jsx)("option",{value:"",children:"Choose alumni to contact..."}),m.filter(e=>e.email&&""!==e.email.trim()).map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.name," - ",e.collegeCourse," (",e.currentOccupation,")"]},e.id))]}),0===m.filter(e=>e.email&&""!==e.email.trim()).length&&(0,s.jsx)("p",{className:"text-xs text-[#A03E2D]/60 mt-1",children:"⚠️ No approved alumni with email addresses found. Add or update alumni records with email addresses to send consultation requests."})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"student-name",className:"block text-sm font-medium text-[#A03E2D] mb-2",children:"Student Name *"}),(0,s.jsx)("input",{type:"text",id:"student-name",name:"studentName",value:w.studentName,onChange:_,required:!0,className:"w-full px-3 py-2 border border-[#A03E2D]/30 rounded-lg focus:outline-none focus:border-[#B23B3B] focus:ring-1 focus:ring-[#B23B3B]",placeholder:"Student's full name"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"student-email",className:"block text-sm font-medium text-[#A03E2D] mb-2",children:"Student Email *"}),(0,s.jsx)("input",{type:"email",id:"student-email",name:"studentEmail",value:w.studentEmail,onChange:_,required:!0,className:"w-full px-3 py-2 border border-[#A03E2D]/30 rounded-lg focus:outline-none focus:border-[#B23B3B] focus:ring-1 focus:ring-[#B23B3B]",placeholder:"student@email.com"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"student-contact",className:"block text-sm font-medium text-[#A03E2D] mb-2",children:"Student Contact (Optional)"}),(0,s.jsx)("input",{type:"text",id:"student-contact",name:"studentContact",value:w.studentContact,onChange:_,className:"w-full px-3 py-2 border border-[#A03E2D]/30 rounded-lg focus:outline-none focus:border-[#B23B3B] focus:ring-1 focus:ring-[#B23B3B]",placeholder:"Phone number or other contact"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"expected-duration",className:"block text-sm font-medium text-[#A03E2D] mb-2",children:"Expected Duration (Optional)"}),(0,s.jsx)("input",{type:"text",id:"expected-duration",name:"expectedDuration",value:w.expectedDuration,onChange:_,className:"w-full px-3 py-2 border border-[#A03E2D]/30 rounded-lg focus:outline-none focus:border-[#B23B3B] focus:ring-1 focus:ring-[#B23B3B]",placeholder:"e.g., 2-3 weeks, 1 month"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"research-title",className:"block text-sm font-medium text-[#A03E2D] mb-2",children:"Research Title *"}),(0,s.jsx)("input",{type:"text",id:"research-title",name:"researchTitle",value:w.researchTitle,onChange:_,required:!0,className:"w-full px-3 py-2 border border-[#A03E2D]/30 rounded-lg focus:outline-none focus:border-[#B23B3B] focus:ring-1 focus:ring-[#B23B3B]",placeholder:"Title of the research project"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"research-description",className:"block text-sm font-medium text-[#A03E2D] mb-2",children:"Research Description (Optional)"}),(0,s.jsx)("textarea",{id:"research-description",name:"researchDescription",value:w.researchDescription,onChange:_,rows:3,className:"w-full px-3 py-2 border border-[#A03E2D]/30 rounded-lg focus:outline-none focus:border-[#B23B3B] focus:ring-1 focus:ring-[#B23B3B]",placeholder:"Brief description of the research project, objectives, methodology, etc."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"consultation-needs",className:"block text-sm font-medium text-[#A03E2D] mb-2",children:"What We Need From Alumni *"}),(0,s.jsx)("textarea",{id:"consultation-needs",name:"consultationNeeds",value:w.consultationNeeds,onChange:_,required:!0,rows:4,className:"w-full px-3 py-2 border border-[#A03E2D]/30 rounded-lg focus:outline-none focus:border-[#B23B3B] focus:ring-1 focus:ring-[#B23B3B]",placeholder:"Specific consultation needs: expertise validation, industry insights, data review, interview participation, etc."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"sender-name",className:"block text-sm font-medium text-[#A03E2D] mb-2",children:"Sender Name (Optional)"}),(0,s.jsx)("input",{type:"text",id:"sender-name",name:"senderName",value:w.senderName,onChange:_,className:"w-full px-3 py-2 border border-[#A03E2D]/30 rounded-lg focus:outline-none focus:border-[#B23B3B] focus:ring-1 focus:ring-[#B23B3B]",placeholder:"Your name or title"})]}),(0,s.jsx)("button",{type:"submit",disabled:B,className:"w-full rounded-lg bg-[#B23B3B] px-6 py-3 text-white font-medium hover:bg-[#8B2E2E] disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:B?"Sending Request...":"\uD83D\uDCE7 Send Consultation Request"})]})]}),(0,s.jsxs)("div",{className:"rounded-xl border-2 border-[#A03E2D] bg-white p-6 shadow-lg",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("h3",{className:"text-xl font-bold text-[#B23B3B]",children:["Recent Requests (",C.length,")"]}),(0,s.jsx)("button",{onClick:q,disabled:F,className:"rounded-lg bg-[#FF7F27] px-3 py-1 text-white text-sm font-medium hover:bg-[#E85D04] disabled:opacity-50 transition-colors duration-200",children:F?"Loading...":"Refresh"})]}),(0,s.jsx)("div",{className:"max-h-96 overflow-y-auto space-y-3",children:F?(0,s.jsx)("div",{className:"text-center py-8",children:(0,s.jsx)("p",{className:"text-[#A03E2D]",children:"Loading consultation history..."})}):0===C.length?(0,s.jsx)("div",{className:"text-center py-8",children:(0,s.jsx)("p",{className:"text-[#A03E2D]/60",children:"No consultation requests sent yet."})}):C.map(e=>(0,s.jsxs)("div",{className:"border border-[#A03E2D]/20 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,s.jsx)("h4",{className:"font-semibold text-[#B23B3B] text-sm",children:e.researchTitle}),(0,s.jsx)("span",{className:"text-xs text-[#A03E2D]/70",children:new Date(1e3*e.sentAt.seconds).toLocaleDateString()})]}),(0,s.jsxs)("div",{className:"text-xs text-[#A03E2D] space-y-1",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Alumni:"})," ",e.alumniName]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Student:"})," ",e.studentName]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Email:"})," ",e.alumniEmail]})]})]},e.id))})]})]})]})]})]}),(0,s.jsxs)("footer",{className:"flex w-full items-center justify-between bg-gradient-to-r from-[#FF7F27] to-[#E85D04] px-6 py-5 shadow-lg",children:[(0,s.jsx)("a",{href:"/trace",className:"group rounded-full border-2 border-[#B23B3B] bg-white/10 px-6 py-2.5 text-[#8B2E2E] underline decoration-2 underline-offset-2 backdrop-blur-sm transition-all duration-300 hover:scale-105 hover:bg-white/30 hover:shadow-md",children:(0,s.jsx)("span",{className:"inline-block transition-transform duration-300 group-hover:-translate-x-1",children:"← T.R.A.C.E."})}),(0,s.jsx)("a",{href:"/",className:"group rounded-full border-2 border-[#B23B3B] bg-white/10 px-6 py-2.5 text-[#8B2E2E] underline decoration-2 underline-offset-2 backdrop-blur-sm transition-all duration-300 hover:scale-105 hover:bg-white/30 hover:shadow-md",children:(0,s.jsx)("span",{className:"inline-block transition-transform duration-300 group-hover:translate-x-1",children:"Home →"})})]})]}):(0,s.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-checkered",children:(0,s.jsx)("div",{className:"animate-pulse",children:(0,s.jsx)("p",{className:"text-lg font-semibold text-[#A03E2D]",children:"Redirecting to login..."})})})}},1158:function(e,t,n){"use strict";let s;n.d(t,{q:function(){return x}});let r=e=>{let t;let n=new Set,s=(e,s)=>{let r="function"==typeof e?e(t):e;if(!Object.is(r,t)){let e=t;t=(null!=s?s:"object"!=typeof r||null===r)?r:Object.assign({},t,r),n.forEach(n=>n(t,e))}},r=()=>t,a={setState:s,getState:r,getInitialState:()=>l,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},l=t=e(s,r,a);return a},a=e=>e?r(e):r;var l=n(2265),i=n(5195);let{useDebugValue:o}=l,{useSyncExternalStoreWithSelector:d}=i,c=!1,u=e=>e,m=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?a(e):e,n=(e,n)=>(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,n=arguments.length>2?arguments[2]:void 0;n&&!c&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),c=!0);let s=d(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return o(s),s})(t,e,n);return Object.assign(n,t),n},x=(s=e=>({isAuthenticated:!1,currentPage:"home",setAuthenticated:t=>e({isAuthenticated:t}),setCurrentPage:t=>e({currentPage:t})}))?m(s):m}},function(e){e.O(0,[971,117,744],function(){return e(e.s=7007)}),_N_E=e.O()}]);